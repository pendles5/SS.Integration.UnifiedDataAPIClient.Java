<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE peacockInt>

<!--  =================================================================
      Copyright 2014 Spin Services Limited
      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.      28 Jan 2013       11:45:22

      project           newBuild
      description       build Unified_Data_API_Client_Java

      fern
      =================================================================
 -->
<project  name="Unified Data API Client Java" default="showMe">

  <property environment="env" />
  <property name="sdkSrc" location="src/main" />
  <property name="build" location="build" />
  <property name="dist" location="dist" />
  <property name="libs" location="lib" />
  <property name="version" value="1.5.1" />



  <target name="showMe" description="this: if no target is specified">
    <echo>Please provide a specific task to run</echo>
  </target>



  <target name="buildSDK" description="build client SDK jar">
    <echo>-- Build a brand new sdk jar</echo>
    <antcall target="init" />
    <antcall target="compileSDK" />
    <antcall target="copyResources" />
    <antcall target="jarSDK" />
    <echo>-- Built a brand new sdk jar</echo>
  </target>



  <target name="init" description="prepare the environment">
    <echo>-- Prepping environment</echo>
    <tstamp/>
    <delete dir="${build}" />
    <delete dir="${dist}" />
    <mkdir dir="${build}" />
    <mkdir dir="${dist}" />   
    <echo>-- Env prepped</echo>
  </target>



  <target name="compileSDK" description="compile SDK classes">
    <echo>-- Compiling SDK project</echo>
    <javac includeantruntime="false" srcdir="${sdkSrc}" destdir="${build}">
      <classpath>
        <fileset dir="${libs}">
          <include name="**/apache-log4j-1.2.17/log4j-1.2.17.jar"/>
          <include name="**/google-gson-2.2.2/gson-2.2.2.jar"/>
          <include name="**/rabbitmq-java-client-bin-2.8.6/rabbitmq-client.jar"/>
          <include name="**/commons-logging-1.1.3.jar"/>
          <include name="**/httpclient-4.3.1.jar"/>
          <include name="**/httpcore-4.3.jar"/>
        </fileset>
      </classpath>
    </javac>
    <echo>-- Compiled SDK project</echo>
  </target>



  <target name="copyResources" description="copy Resources">
    <echo>-- Copying SDK resources</echo>
    <copy todir="${build}" flatten="true">
      <file file="${libs}/apache-log4j-1.2.17/log4j-1.2.17.jar"/>
      <file file="${libs}/google-gson-2.2.2/gson-2.2.2.jar"/>
      <file file="${libs}/rabbitmq-java-client-bin-2.8.6/rabbitmq-client.jar"/>
      <file file="${libs}/commons-logging-1.1.3.jar"/>
      <file file="${libs}/httpclient-4.3.1.jar"/>
      <file file="${libs}/httpcore-4.3.jar"/>
    </copy>
    <echo>-- Copied SDK resources</echo>
  </target>














  <target name="jarSDK" description="create SDK jar">
    <echo>-- Jaring up SDK project</echo>
    <jar destfile="${dist}/SportingSolutions.Udapi.Sdk.Java-${version}.jar" basedir="${build}"/>
    <echo>-- Jared up SDK project</echo>
  </target>
  

</project>